<!-- Navigation globale RepAvi Lodges -->
<nav class="bg-white shadow-lg border-b">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      
      <!-- Logo RepAvi -->
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center">
          <span class="material-icons text-white text-lg">home</span>
        </div>
        <div>
          <h1 class="font-bold text-lg text-gray-900" style="font-family: 'Romla', serif;">RepAvi Lodges</h1>
          <p class="text-xs text-gray-500" style="font-family: 'Arimo', sans-serif;">Système de Gestion</p>
        </div>
      </div>

      <!-- Menu Principal -->
      <div class="hidden md:flex items-center space-x-6">
        <a href="{% url 'dashboard' %}" 
           class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-600 transition-colors {% if request.resolver_match.url_name == 'dashboard' %}bg-blue-50 text-blue-600{% endif %}">
          <span class="material-icons text-sm">dashboard</span>
          <span style="font-family: 'Arimo', sans-serif;">Dashboard</span>
        </a>

        <a href="{% url 'appartements:liste' %}" 
           class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-600 transition-colors {% if 'appartements' in request.resolver_match.app_name %}bg-blue-50 text-blue-600{% endif %}">
          <span class="material-icons text-sm">apartment</span>
          <span style="font-family: 'Arimo', sans-serif;">Appartements</span>
        </a>

        <a href="{% url 'clients:liste' %}" 
           class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-600 transition-colors {% if 'clients' in request.resolver_match.app_name %}bg-blue-50 text-blue-600{% endif %}">
          <span class="material-icons text-sm">people</span>
          <span style="font-family: 'Arimo', sans-serif;">Clients</span>
        </a>

        <a href="{% url 'reservations:calendrier' %}" 
           class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-600 transition-colors {% if 'reservations' in request.resolver_match.app_name %}bg-blue-50 text-blue-600{% endif %}">
          <span class="material-icons text-sm">event</span>
          <span style="font-family: 'Arimo', sans-serif;">Réservations</span>
        </a>

        <a href="{% url 'paiements:echeancier' %}" 
           class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-600 transition-colors {% if 'paiements' in request.resolver_match.app_name %}bg-blue-50 text-blue-600{% endif %}">
          <span class="material-icons text-sm">payments</span>
          <span style="font-family: 'Arimo', sans-serif;">Paiements</span>
        </a>

        <!-- Menu déroulant pour les autres modules -->
        <div class="relative group">
          <button class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-600 transition-colors">
            <span class="material-icons text-sm">more_horiz</span>
            <span style="font-family: 'Arimo', sans-serif;">Plus</span>
            <span class="material-icons text-sm">expand_more</span>
          </button>
          
          <div class="absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-xl shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <a href="{% url 'inventaire:general' %}" 
               class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors first:rounded-t-xl">
              <span class="material-icons text-sm">inventory</span>
              <span style="font-family: 'Arimo', sans-serif;">Inventaire</span>
            </a>
            
            <a href="{% url 'menage:planning' %}" 
               class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors">
              <span class="material-icons text-sm">cleaning_services</span>
              <span style="font-family: 'Arimo', sans-serif;">Ménage</span>
            </a>
            
            <a href="{% url 'comptabilite:rapport_mensuel' %}" 
               class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors">
              <span class="material-icons text-sm">account_balance</span>
              <span style="font-family: 'Arimo', sans-serif;">Comptabilité</span>
            </a>
            
            <a href="{% url 'facturation:generer' %}" 
               class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors last:rounded-b-xl">
              <span class="material-icons text-sm">receipt</span>
              <span style="font-family: 'Arimo', sans-serif;">Facturation</span>
            </a>
          </div>
        </div>
      </div>

      <!-- Menu utilisateur -->
      <div class="flex items-center space-x-4">
        <!-- Notifications -->
        <button class="relative p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors">
          <span class="material-icons">notifications</span>
          <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></span>
        </button>

        <!-- Menu utilisateur -->
        <div class="relative group">
          <button class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-600 transition-colors">
            <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
              <span class="material-icons text-white text-sm">person</span>
            </div>
            <div class="text-left hidden lg:block">
              <p class="text-sm font-medium" style="font-family: 'Arimo', sans-serif;">{{ user.first_name|default:user.username }}</p>
              <p class="text-xs text-gray-500" style="font-family: 'Arimo', sans-serif;">{{ user.get_profil_display }}</p>
            </div>
            <span class="material-icons text-sm">expand_more</span>
          </button>
          
          <div class="absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-xl shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <a href="{% url 'users:profil' %}" 
               class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors first:rounded-t-xl">
              <span class="material-icons text-sm">account_circle</span>
              <span style="font-family: 'Arimo', sans-serif;">Mon Profil</span>
            </a>
            
            {% if user.profil == 'super_admin' %}
            <a href="{% url 'users:liste_gestionnaires' %}" 
               class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors">
              <span class="material-icons text-sm">supervisor_account</span>
              <span style="font-family: 'Arimo', sans-serif;">Gestionnaires</span>
            </a>
            {% endif %}
            
            <a href="{% url 'users:historique' %}" 
               class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors">
              <span class="material-icons text-sm">history</span>
              <span style="font-family: 'Arimo', sans-serif;">Historique</span>
            </a>
            
            <hr class="my-1">
            
            <a href="{% url 'logout' %}" 
               class="flex items-center space-x-3 px-4 py-3 text-red-600 hover:bg-red-50 transition-colors last:rounded-b-xl">
              <span class="material-icons text-sm">logout</span>
              <span style="font-family: 'Arimo', sans-serif;">Déconnexion</span>
            </a>
          </div>
        </div>
      </div>

      <!-- Menu mobile -->
      <div class="md:hidden">
        <button id="mobile-menu-button" class="p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg">
          <span class="material-icons">menu</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Menu mobile déroulant -->
  <div id="mobile-menu" class="md:hidden border-t bg-gray-50 hidden">
    <div class="px-4 py-3 space-y-2">
      <a href="{% url 'dashboard' %}" class="flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-white hover:text-blue-600 transition-colors">
        <span class="material-icons text-sm">dashboard</span>
        <span style="font-family: 'Arimo', sans-serif;">Dashboard</span>
      </a>
      
      <a href="{% url 'appartements:liste' %}" class="flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-white hover:text-blue-600 transition-colors">
        <span class="material-icons text-sm">apartment</span>
        <span style="font-family: 'Arimo', sans-serif;">Appartements</span>
      </a>
      
      <a href="{% url 'clients:liste' %}" class="flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-white hover:text-blue-600 transition-colors">
        <span class="material-icons text-sm">people</span>
        <span style="font-family: 'Arimo', sans-serif;">Clients</span>
      </a>
      
      <a href="{% url 'reservations:calendrier' %}" class="flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-white hover:text-blue-600 transition-colors">
        <span class="material-icons text-sm">event</span>
        <span style="font-family: 'Arimo', sans-serif;">Réservations</span>
      </a>
      
      <a href="{% url 'paiements:echeancier' %}" class="flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-white hover:text-blue-600 transition-colors">
        <span class="material-icons text-sm">payments</span>
        <span style="font-family: 'Arimo', sans-serif;">Paiements</span>
      </a>
    </div>
  </div>
</nav>

<script>
// Menu mobile toggle
document.getElementById('mobile-menu-button').addEventListener('click', function() {
  const mobileMenu = document.getElementById('mobile-menu');
  mobileMenu.classList.toggle('hidden');
});
</script>