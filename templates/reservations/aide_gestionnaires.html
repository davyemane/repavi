{% extends 'reservations/base.html' %}

{% block title %}Guide du Gestionnaire | RepAvi Admin{% endblock %}

{% block page_title %}
    <i class="fas fa-question-circle text-blue-600 mr-2"></i>
    Guide du Gestionnaire
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50">
            <h2 class="text-2xl font-bold text-gray-900">
                <i class="fas fa-graduation-cap text-blue-600 mr-3"></i>
                Guide Complet de Gestion des R√©servations
            </h2>
            <p class="text-gray-600 mt-2">
                D√©couvrez comment g√©rer efficacement vos r√©servations et l'occupation de vos maisons
            </p>
        </div>
        
        <div class="p-6">
            <!-- Table des mati√®res -->
            <div class="bg-gray-50 rounded-lg p-4 mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">
                    <i class="fas fa-list text-gray-600 mr-2"></i>
                    Table des Mati√®res
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                    <a href="#workflow" class="text-blue-600 hover:text-blue-800 text-sm">1. Workflow des R√©servations</a>
                    <a href="#dashboard" class="text-blue-600 hover:text-blue-800 text-sm">2. Dashboard Gestionnaire</a>
                    <a href="#validation" class="text-blue-600 hover:text-blue-800 text-sm">3. Validation des R√©servations</a>
                    <a href="#occupation" class="text-blue-600 hover:text-blue-800 text-sm">4. Gestion de l'Occupation</a>
                    <a href="#paiements" class="text-blue-600 hover:text-blue-800 text-sm">5. Gestion des Paiements</a>
                    <a href="#bonnes-pratiques" class="text-blue-600 hover:text-blue-800 text-sm">6. Bonnes Pratiques</a>
                </div>
            </div>

            <!-- Section 1: Workflow -->
            <section id="workflow" class="mb-12">
                <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                    <span class="bg-blue-100 text-blue-600 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold mr-3">1</span>
                    Workflow des R√©servations
                </h3>
                
                <div class="space-y-6">
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-6">
                        <h4 class="text-lg font-semibold text-orange-900 mb-3">
                            <i class="fas fa-clock text-orange-600 mr-2"></i>
                            √âtape 1: R√©servation en Attente
                        </h4>
                        <p class="text-orange-800 mb-3">
                            Quand un client fait une r√©servation, elle est automatiquement mise en statut "En attente" et n√©cessite votre validation.
                        </p>
                        <div class="bg-white rounded p-3">
                            <strong>Actions disponibles :</strong>
                            <ul class="list-disc list-inside text-sm text-gray-700 mt-2">
                                <li>‚úÖ Valider la r√©servation (passage en "Confirm√©e")</li>
                                <li>‚ùå Rejeter/Annuler la r√©servation</li>
                                <li>‚úèÔ∏è Ajouter des commentaires internes</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                        <h4 class="text-lg font-semibold text-green-900 mb-3">
                            <i class="fas fa-check-circle text-green-600 mr-2"></i>
                            √âtape 2: R√©servation Confirm√©e
                        </h4>
                        <p class="text-green-800 mb-3">
                            ‚ö†Ô∏è <strong>IMPORTANT :</strong> Quand vous validez une r√©servation, la maison est <strong>automatiquement marqu√©e comme occup√©e</strong> par le client.
                        </p>
                        <div class="bg-white rounded p-3">
                            <strong>Ce qui se passe automatiquement :</strong>
                            <ul class="list-disc list-inside text-sm text-gray-700 mt-2">
                                <li>üè† Maison ‚Üí Statut "Occup√©"</li>
                                <li>üë§ Locataire ‚Üí Client de la r√©servation</li>
                                <li>üìÖ Date de fin ‚Üí Date de fin de r√©servation</li>
                                <li>üí≥ Paiements ‚Üí Disponibles pour gestion</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
                        <h4 class="text-lg font-semibold text-blue-900 mb-3">
                            <i class="fas fa-flag-checkered text-blue-600 mr-2"></i>
                            √âtape 3: Fin de S√©jour
                        </h4>
                        <p class="text-blue-800 mb-3">
                            Quand le s√©jour se termine, vous devez marquer la r√©servation comme "Termin√©e".
                        </p>
                        <div class="bg-white rounded p-3">
                            <strong>Ce qui se passe automatiquement :</strong>
                            <ul class="list-disc list-inside text-sm text-gray-700 mt-2">
                                <li>üè† Maison ‚Üí Statut "Libre"</li>
                                <li>üë§ Locataire ‚Üí Supprim√©</li>
                                <li>‚≠ê √âvaluation ‚Üí Demand√©e au client</li>
                                <li>üìä Statistiques ‚Üí Mises √† jour</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 2: Dashboard -->
            <section id="dashboard" class="mb-12">
                <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                    <span class="bg-blue-100 text-blue-600 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold mr-3">2</span>
                    Utilisation du Dashboard
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="border border-gray-200 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-900 mb-3">
                            <i class="fas fa-exclamation-triangle text-orange-600 mr-2"></i>
                            Actions Prioritaires
                        </h4>
                        <ul class="text-sm text-gray-700 space-y-2">
                            <li>‚Ä¢ <strong>R√©servations √† valider :</strong> bouton "VALIDER" direct</li>
                            <li>‚Ä¢ <strong>Arriv√©es du jour :</strong> pr√©parer l'accueil</li>
                            <li>‚Ä¢ <strong>D√©parts du jour :</strong> bouton "TERMINER" direct</li>
                            <li>‚Ä¢ <strong>Paiements :</strong> acc√®s √† la gestion compl√®te</li>
                        </ul>
                    </div>
                    
                    <div class="border border-gray-200 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-900 mb-3">
                            <i class="fas fa-chart-bar text-purple-600 mr-2"></i>
                            M√©triques Importantes
                        </h4>
                        <ul class="text-sm text-gray-700 space-y-2">
                            <li>‚Ä¢ <strong>Taux d'occupation :</strong> % maisons occup√©es</li>
                            <li>‚Ä¢ <strong>CA mensuel :</strong> revenus confirm√©s</li>
                            <li>‚Ä¢ <strong>Dur√©e moyenne :</strong> optimisation prix</li>
                            <li>‚Ä¢ <strong>Taux annulation :</strong> qualit√© service</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 3: Validation -->
            <section id="validation" class="mb-12">
                <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                    <span class="bg-blue-100 text-blue-600 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold mr-3">3</span>
                    Validation des R√©servations
                </h3>
                
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6">
                    <h4 class="text-lg font-semibold text-yellow-900 mb-3">
                        <i class="fas fa-lightbulb text-yellow-600 mr-2"></i>
                        M√©thodes de Validation
                    </h4>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white rounded p-4 border">
                            <h5 class="font-semibold text-gray-900 mb-2">üöÄ Validation Rapide</h5>
                            <p class="text-sm text-gray-700">
                                Depuis le dashboard ‚Üí Bouton "VALIDER" orange dans la section "Actions Prioritaires"
                            </p>
                        </div>
                        
                        <div class="bg-white rounded p-4 border">
                            <h5 class="font-semibold text-gray-900 mb-2">‚öôÔ∏è Validation D√©taill√©e</h5>
                            <p class="text-sm text-gray-700">
                                Liste r√©servations ‚Üí Bouton "G√©rer" ‚Üí Page de gestion compl√®te avec commentaires
                            </p>
                        </div>
                        
                        <div class="bg-white rounded p-4 border">
                            <h5 class="font-semibold text-gray-900 mb-2">üì± Validation Mobile</h5>
                            <p class="text-sm text-gray-700">
                                Interface responsive adapt√©e pour validation depuis mobile/tablette
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                    <h4 class="text-lg font-semibold text-red-900 mb-2">
                        <i class="fas fa-exclamation-circle text-red-600 mr-2"></i>
                        ‚ö†Ô∏è Attention lors de la validation
                    </h4>
                    <p class="text-red-800 text-sm">
                        La validation est <strong>irr√©versible</strong> c√¥t√© occupation. Une fois valid√©e, la maison sera imm√©diatement marqu√©e comme occup√©e et ne sera plus disponible pour d'autres r√©servations durant la p√©riode.
                    </p>
                </div>
            </section>

            <!-- Section 4: Occupation -->
            <section id="occupation" class="mb-12">
                <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                    <span class="bg-blue-100 text-blue-600 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold mr-3">4</span>
                    Gestion Automatique de l'Occupation
                </h3>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full border border-gray-200 rounded-lg">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-sm font-semibold text-gray-900">Action Gestionnaire</th>
                                <th class="px-4 py-3 text-left text-sm font-semibold text-gray-900">Effet sur la Maison</th>
                                <th class="px-4 py-3 text-left text-sm font-semibold text-gray-900">Statut Maison</th>
                                <th class="px-4 py-3 text-left text-sm font-semibold text-gray-900">Disponibilit√©</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-3 text-sm">‚úÖ Valider r√©servation</td>
                                <td class="px-4 py-3 text-sm">Maison automatiquement occup√©e</td>
                                <td class="px-4 py-3"><span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs">Occup√©</span></td>
                                <td class="px-4 py-3 text-sm">‚ùå Indisponible</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 text-sm">üèÅ Terminer s√©jour</td>
                                <td class="px-4 py-3 text-sm">Maison automatiquement lib√©r√©e</td>
                                <td class="px-4 py-3"><span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs">Libre</span></td>
                                <td class="px-4 py-3 text-sm">‚úÖ Disponible</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 text-sm">‚ùå Annuler r√©servation</td>
                                <td class="px-4 py-3 text-sm">Maison lib√©r√©e si occup√©e par ce client</td>
                                <td class="px-4 py-3"><span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs">Libre</span></td>
                                <td class="px-4 py-3 text-sm">‚úÖ Disponible</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h4 class="font-semibold text-blue-900 mb-2">
                        <i class="fas fa-sync text-blue-600 mr-2"></i>
                        Synchronisation Automatique
                    </h4>
                    <p class="text-blue-800 text-sm">
                        Le syst√®me maintient automatiquement la coh√©rence entre les r√©servations et l'occupation des maisons. En cas d'incoh√©rence, utilisez la commande : 
                        <code class="bg-blue-100 px-2 py-1 rounded">python manage.py sync_reservations_maisons</code>
                    </p>
                </div>
            </section>

            <!-- Section 5: Paiements -->
            <section id="paiements" class="mb-12">
                <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                    <span class="bg-blue-100 text-blue-600 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold mr-3">5</span>
                    Gestion des Paiements
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="border border-gray-200 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-900 mb-3">
                            <i class="fas fa-credit-card text-green-600 mr-2"></i>
                            Acc√®s aux Paiements
                        </h4>
                        <ul class="text-sm text-gray-700 space-y-2">
                            <li>‚Ä¢ <strong>Dashboard :</strong> section "Gestion Paiements"</li>
                            <li>‚Ä¢ <strong>Liste r√©servations :</strong> bouton "Paiements"</li>
                            <li>‚Ä¢ <strong>D√©tail r√©servation :</strong> onglet paiements</li>
                        </ul>
                    </div>
                    
                    <div class="border border-gray-200 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-900 mb-3">
                            <i class="fas fa-tasks text-orange-600 mr-2"></i>
                            Actions Disponibles
                        </h4>
                        <ul class="text-sm text-gray-700 space-y-2">
                            <li>‚Ä¢ ‚úÖ Valider paiements en attente</li>
                            <li>‚Ä¢ üí≥ Ajouter nouveaux paiements</li>
                            <li>‚Ä¢ üìä Consulter historique complet</li>
                            <li>‚Ä¢ üí∞ Suivre montants restants</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 6: Bonnes Pratiques -->
            <section id="bonnes-pratiques" class="mb-12">
                <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                    <span class="bg-blue-100 text-blue-600 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold mr-3">6</span>
                    Bonnes Pratiques
                </h3>
                
                <div class="space-y-6">
                    <div class="border-l-4 border-green-500 pl-4">
                        <h4 class="font-semibold text-green-900 mb-2">‚úÖ √Ä Faire</h4>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>‚Ä¢ Valider les r√©servations dans les 24h</li>
                            <li>‚Ä¢ V√©rifier les paiements avant validation</li>
                            <li>‚Ä¢ Terminer les s√©jours le jour du d√©part</li>
                            <li>‚Ä¢ Ajouter des commentaires internes utiles</li>
                            <li>‚Ä¢ Consulter le dashboard quotidiennement</li>
                        </ul>
                    </div>
                    
                    <div class="border-l-4 border-red-500 pl-4">
                        <h4 class="font-semibold text-red-900 mb-2">‚ùå √Ä √âviter</h4>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>‚Ä¢ Laisser des r√©servations en attente trop longtemps</li>
                            <li>‚Ä¢ Modifier manuellement le statut d'occupation des maisons</li>
                            <li>‚Ä¢ Valider sans v√©rifier la disponibilit√© r√©elle</li>
                            <li>‚Ä¢ Oublier de terminer les s√©jours expir√©s</li>
                        </ul>
                    </div>
                    
                    <div class="border-l-4 border-blue-500 pl-4">
                        <h4 class="font-semibold text-blue-900 mb-2">üí° Conseils</h4>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>‚Ä¢ Utilisez les raccourcis du dashboard pour gagner du temps</li>
                            <li>‚Ä¢ Consultez les m√©triques pour optimiser vos tarifs</li>
                            <li>‚Ä¢ R√©pondez aux √©valuations clients pour am√©liorer votre image</li>
                            <li>‚Ä¢ Utilisez les commentaires pour communiquer avec l'√©quipe</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Contact Support -->
            <div class="bg-gray-50 rounded-lg p-6 text-center">
                <h3 class="text-lg font-semibold text-gray-900 mb-3">
                    <i class="fas fa-life-ring text-blue-600 mr-2"></i>
                    Besoin d'Aide ?
                </h3>
                <p class="text-gray-600 mb-4">
                    Notre √©quipe support est l√† pour vous accompagner dans l'utilisation de la plateforme.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="mailto:support@repavi.com" 
                       class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                        <i class="fas fa-envelope mr-2"></i>
                        support@repavi.com
                    </a>
                    <a href="tel:+237000000000" 
                       class="inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                        <i class="fas fa-phone mr-2"></i>
                        +237 000 000 000
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Style pour la navigation dans la page */
html {
    scroll-behavior: smooth;
}

/* Style pour les liens de la table des mati√®res */
.table-of-contents a:hover {
    text-decoration: underline;
}

/* Style pour les sections */
section {
    scroll-margin-top: 2rem;
}

/* Style pour le code */
code {
    font-family: 'Courier New', monospace;
}
</style>
{% endblock %}