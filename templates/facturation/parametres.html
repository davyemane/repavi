{% extends 'base.html' %}
{% load static %}

{% block nav_facturation %}
flex items-center space-x-3 px-3 py-3 text-[#02066F] bg-[#02066F]/10 rounded-lg font-medium transition-all duration-300
{% endblock %}

{% block title %}Paramètres Facturation - RepAvi Lodges{% endblock %}
{% block page_title %}Paramètres de Facturation{% endblock %}
{% block page_subtitle %}Configuration générale des factures RepAvi{% endblock %}

{% block header_actions %}
<div class="flex items-center space-x-3">
    <a href="{% url 'facturation:liste' %}" 
       class="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-600 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors font-lato">
        <span class="material-icons text-sm mr-2">arrow_back</span>
        Retour
    </a>
</div>
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto space-y-6">
    <form method="post" class="space-y-6">
        {% csrf_token %}
        
        <!-- Informations Entreprise -->
        <div class="bg-white rounded-lg border border-gray-200 p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-6 font-lato">
                <span class="material-icons text-[#02066F] mr-2">business</span>
                Informations Entreprise
            </h3>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">Nom de l'entreprise</label>
                    <input type="text" 
                           name="nom_entreprise" 
                           value="{{ parametres.nom_entreprise }}"
                           required
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">Téléphone</label>
                    <input type="tel" 
                           name="telephone" 
                           value="{{ parametres.telephone }}"
                           required
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">Email</label>
                    <input type="email" 
                           name="email" 
                           value="{{ parametres.email }}"
                           required
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">Site web (optionnel)</label>
                    <input type="url" 
                           name="site_web" 
                           value="{{ parametres.site_web|default:'' }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">
                </div>
            </div>
            
            <div class="mt-6">
                <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">Adresse complète</label>
                <textarea name="adresse" 
                          rows="3"
                          required
                          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">{{ parametres.adresse }}</textarea>
            </div>
        </div>

        <!-- Informations Fiscales -->
        <div class="bg-white rounded-lg border border-gray-200 p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-6 font-lato">
                <span class="material-icons text-[#02066F] mr-2">receipt_long</span>
                Informations Fiscales
            </h3>
            
            <div class="grid md:grid-cols-3 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">Taux TVA par défaut (%)</label>
                    <input type="number" 
                           name="taux_tva_defaut" 
                           value="{{ parametres.taux_tva_defaut }}"
                           step="0.01"
                           min="0"
                           max="100"
                           required
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">N° Contribuable</label>
                    <input type="text" 
                           name="numero_contribuable" 
                           value="{{ parametres.numero_contribuable|default:'' }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">N° RCCM</label>
                    <input type="text" 
                           name="numero_rccm" 
                           value="{{ parametres.numero_rccm|default:'' }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">
                </div>
            </div>
        </div>

        <!-- Paramètres de Facturation -->
        <div class="bg-white rounded-lg border border-gray-200 p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-6 font-lato">
                <span class="material-icons text-[#02066F] mr-2">settings</span>
                Paramètres de Facturation
            </h3>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">Frais de ménage par défaut (FCFA)</label>
                    <input type="number" 
                           name="frais_menage_defaut" 
                           value="{{ parametres.frais_menage_defaut|default:5000 }}"
                           step="500"
                           min="0"
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">Délai de paiement (jours)</label>
                    <input type="number" 
                           name="delai_paiement_jours" 
                           value="{{ parametres.delai_paiement_jours|default:30 }}"
                           min="1"
                           max="365"
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">
                </div>
            </div>
        </div>

        <!-- Textes par défaut -->
        <div class="bg-white rounded-lg border border-gray-200 p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-6 font-lato">
                <span class="material-icons text-[#02066F] mr-2">description</span>
                Textes par défaut
            </h3>
            
            <div class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">Conditions générales</label>
                    <textarea name="conditions_generales" 
                              rows="4"
                              class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">{{ parametres.conditions_generales|default:"Paiement à réception de facture. Aucun remboursement après 24h de l'arrivée." }}</textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">Mentions légales</label>
                    <textarea name="mentions_legales" 
                              rows="3"
                              class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">{{ parametres.mentions_legales|default:"RepAvi Lodges - Société responsabilité limitée au capital de 1.000.000 FCFA" }}</textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 font-lato">Pied de page facture</label>
                    <textarea name="footer_facture" 
                              rows="2"
                              class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-[#02066F] focus:ring-2 focus:ring-blue-100 font-lato">{{ parametres.footer_facture }}</textarea>
                </div>
            </div>
        </div>

        <!-- Actions -->
        <div class="flex items-center justify-end bg-white rounded-lg border border-gray-200 p-6">
            <button type="submit" 
                    class="inline-flex items-center px-8 py-3 bg-[#02066F] text-white rounded-lg hover:bg-[#030a8a] transition-colors font-medium font-lato">
                <span class="material-icons text-sm mr-2">save</span>
                Sauvegarder les paramètres
            </button>
        </div>
    </form>
</div>
{% endblock %}